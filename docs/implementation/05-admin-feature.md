# 管理画面（Admin）機能 実装状況

管理画面の全体レイアウト、ダッシュボード、バックアップ機能の実装状況です。

**最終更新**: 2026-02-19
**進捗率**: 100%

---

## 📊 実装状況サマリー

| 機能 | 状況 | ファイル |
|------|------|---------|
| AdminSidebar / Layout | ✅ 完了 | `src/components/layout/AdminSidebar.tsx`, `src/app/(admin)/layout.tsx` |
| ダッシュボード | ✅ 完了 | `src/app/(admin)/admin/dashboard/page.tsx` |
| バックアップ | ✅ 完了 | `src/lib/actions/backup.ts`, `src/app/(admin)/admin/backup/page.tsx` |
| 固定ページ編集（Home/About/Links） | ✅ 完了 | `src/app/(admin)/admin/pages/*` |
| タグ管理 | ✅ 完了 | `src/app/(admin)/admin/tags/page.tsx`, `src/lib/actions/tags.ts` |
| 記事のメディア/関連設定 | ✅ 完了 | `src/components/admin/PostEditorClient.tsx` |
| 進行中の完了情報管理 | ✅ 完了 | `src/components/admin/InProgressList.tsx` |

---

## ✅ 実装完了機能

### 1. 管理画面レイアウト

- ✅ **AdminSidebar**: Blue Archive風のデザイン。折りたたみ機能、アクティブ状態の表示、サイト表示リンクを実装。
- ✅ **認証統合**: サイドバー最下部にログアウトボタンを配置。
- ✅ **固定ページナビ**: `/admin/pages` から自己紹介・リンク編集へ遷移。サブリンク（ホーム/自己紹介/リンク）を追加。

---

## 🎨 管理画面テーマ方針（更新）

- スカイブルー + ピンクを基調に、よりエネルギッシュで軽快な印象へ寄せる
- ライトモード強調（暗い配色は最小限、背景は明るく）
- 公開UIへの影響を避けるため、管理画面専用スコープ（例: `.admin-theme`）でトークン・クラスを適用
- サイドバー/カード/ボタンはグラデーションとアクセントラインで統一

### 2. ダッシュボード統計情報

**ファイル**: `src/app/(admin)/admin/dashboard/page.tsx`, `src/lib/actions/system.ts`

- ✅ **統計カード**: 総記事数、総プロジェクト数、進行中アイテム数、累計閲覧数を表示。
- ✅ **最新の記事**: 最新の投稿をステータス・閲覧数と共に一覧表示。
- ✅ **進行中の項目**: 現在の進捗率をリスト表示。
- ✅ **クイックアクション**: よく使う機能（新規記事作成、プロジェクト追加、バックアップ、サイト表示）へのショートカット。
- ✅ **最近のアクティビティ**: 記事の公開やプロジェクトの追加履歴を動的に表示。

### 3. バックアップ機能

**ファイル**: `src/lib/actions/backup.ts`, `src/app/(admin)/admin/backup/page.tsx`

- ✅ **エクスポート**: 記事、プロジェクト、進行中アイテム、タグ、固定ページの全データをJSON形式で一括エクスポート。
- ✅ **インポート**: JSONファイルからデータを復元（UPSERT処理によるデータの整合性維持）。
- ✅ **UI**: 直感的なダウンロード/アップロードインターフェース、インポート時の警告表示。

### 4. 固定ページ編集

**ファイル**: `src/app/(admin)/admin/pages/about/page.tsx`, `src/app/(admin)/admin/pages/links/page.tsx`

- ✅ **ホーム編集**: ヒーロー、CTA、セクション見出しを管理。
- ✅ **自己紹介編集**: 基本情報、本文、スキル、経歴、プロフィール画像の編集。
- ✅ **リンク編集**: SNS/その他リンクの追加・削除、アイコン選択、画像アイコンアップロード。
- ✅ **SNS候補**: Misskey/note/Zenn/Qiita を追加。
- ✅ **保存ボタン配置**: ホーム/自己紹介/リンクの保存ボタンを左寄せに統一。
- ✅ **保存方式**: `upsertPage` による作成/更新。
- ✅ **画像アップロード**: Supabase Storage `images` バケットを使用。バケット未作成時は自動作成して再試行。

### 5. タグ管理

- ✅ **タグCRUD**: 作成/編集/削除（名前、スラッグ、色、説明）。
- ✅ **使用数表示**: 記事/プロジェクトの利用数を確認可能。

### 6. 記事のメディア/関連設定

- ✅ **カバー画像/OGP画像**: 画像アップロード対応。
- ✅ **関連記事/関連プロジェクト**: 手動でリンクを管理。配置は2カラムで整列。

### 7. 進行中の表示

- ✅ **管理画面の進捗バー**: グラデーションを全幅で描画し、右側を背景色でマスク。

### 7. 進行中の完了情報

- ✅ **完了日/関連プロジェクト**: 完了時の詳細を管理可能。

---

## 🧩 実装メモ（運用ルール）

- 管理画面のページは Server Component でデータ取得し、Client Component へ `props` で渡す。
- Client Component から Server Actions を直接 import しない（`next/headers` を含むためビルドエラーになる）。
- 画像アップロードやCRUDは Server Action を Server Component から渡して実行する。

---

## 🎯 次のステップ

主要な管理機能の更新が完了しました。

---

## 🔗 関連ドキュメント

- [全体概要](./00-overview.md)
- [認証機能](./06-auth-feature.md)

---

**最終更新**: 2026-02-19
